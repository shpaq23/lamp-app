<!doctype html>
<html class="no-js" lang="pl">

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="icon" type="image/x-icon" href="https://light.desineo.pl/wp-content/themes/default/assets/images/favicon.ico">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
	<title>Kreator &#8211; Light</title>
	<meta name='robots' content='max-image-preview:large'/>
	<style id='classic-theme-styles-inline-css' type='text/css'>
        /*! This file is auto-generated */
        .wp-block-button__link {
            color: #fff;
            background-color: #32373c;
            border-radius: 9999px;
            box-shadow: none;
            text-decoration: none;
            padding: calc(.667em + 2px) calc(1.333em + 2px);
            font-size: 1.125em
        }

        .wp-block-file__button {
            background: #32373c;
            color: #fff;
            text-decoration: none
        }
	</style>
	<style id='global-styles-inline-css' type='text/css'>
        body {
            --wp--preset--color--black: #000000;
            --wp--preset--color--cyan-bluish-gray: #abb8c3;
            --wp--preset--color--white: #ffffff;
            --wp--preset--color--pale-pink: #f78da7;
            --wp--preset--color--vivid-red: #cf2e2e;
            --wp--preset--color--luminous-vivid-orange: #ff6900;
            --wp--preset--color--luminous-vivid-amber: #fcb900;
            --wp--preset--color--light-green-cyan: #7bdcb5;
            --wp--preset--color--vivid-green-cyan: #00d084;
            --wp--preset--color--pale-cyan-blue: #8ed1fc;
            --wp--preset--color--vivid-cyan-blue: #0693e3;
            --wp--preset--color--vivid-purple: #9b51e0;
            --wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg, rgba(6, 147, 227, 1) 0%, rgb(155, 81, 224) 100%);
            --wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg, rgb(122, 220, 180) 0%, rgb(0, 208, 130) 100%);
            --wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg, rgba(252, 185, 0, 1) 0%, rgba(255, 105, 0, 1) 100%);
            --wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg, rgba(255, 105, 0, 1) 0%, rgb(207, 46, 46) 100%);
            --wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg, rgb(238, 238, 238) 0%, rgb(169, 184, 195) 100%);
            --wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg, rgb(74, 234, 220) 0%, rgb(151, 120, 209) 20%, rgb(207, 42, 186) 40%, rgb(238, 44, 130) 60%, rgb(251, 105, 98) 80%, rgb(254, 248, 76) 100%);
            --wp--preset--gradient--blush-light-purple: linear-gradient(135deg, rgb(255, 206, 236) 0%, rgb(152, 150, 240) 100%);
            --wp--preset--gradient--blush-bordeaux: linear-gradient(135deg, rgb(254, 205, 165) 0%, rgb(254, 45, 45) 50%, rgb(107, 0, 62) 100%);
            --wp--preset--gradient--luminous-dusk: linear-gradient(135deg, rgb(255, 203, 112) 0%, rgb(199, 81, 192) 50%, rgb(65, 88, 208) 100%);
            --wp--preset--gradient--pale-ocean: linear-gradient(135deg, rgb(255, 245, 203) 0%, rgb(182, 227, 212) 50%, rgb(51, 167, 181) 100%);
            --wp--preset--gradient--electric-grass: linear-gradient(135deg, rgb(202, 248, 128) 0%, rgb(113, 206, 126) 100%);
            --wp--preset--gradient--midnight: linear-gradient(135deg, rgb(2, 3, 129) 0%, rgb(40, 116, 252) 100%);
            --wp--preset--font-size--small: 13px;
            --wp--preset--font-size--medium: 20px;
            --wp--preset--font-size--large: 36px;
            --wp--preset--font-size--x-large: 42px;
            --wp--preset--spacing--20: 0.44rem;
            --wp--preset--spacing--30: 0.67rem;
            --wp--preset--spacing--40: 1rem;
            --wp--preset--spacing--50: 1.5rem;
            --wp--preset--spacing--60: 2.25rem;
            --wp--preset--spacing--70: 3.38rem;
            --wp--preset--spacing--80: 5.06rem;
            --wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);
            --wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);
            --wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);
            --wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);
            --wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);
        }

        :where(.is-layout-flex) {
            gap: 0.5em;
        }

        :where(.is-layout-grid) {
            gap: 0.5em;
        }

        body .is-layout-flow > .alignleft {
            float: left;
            margin-inline-start: 0;
            margin-inline-end: 2em;
        }

        body .is-layout-flow > .alignright {
            float: right;
            margin-inline-start: 2em;
            margin-inline-end: 0;
        }

        body .is-layout-flow > .aligncenter {
            margin-left: auto !important;
            margin-right: auto !important;
        }

        body .is-layout-constrained > .alignleft {
            float: left;
            margin-inline-start: 0;
            margin-inline-end: 2em;
        }

        body .is-layout-constrained > .alignright {
            float: right;
            margin-inline-start: 2em;
            margin-inline-end: 0;
        }

        body .is-layout-constrained > .aligncenter {
            margin-left: auto !important;
            margin-right: auto !important;
        }

        body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)) {
            max-width: var(--wp--style--global--content-size);
            margin-left: auto !important;
            margin-right: auto !important;
        }

        body .is-layout-constrained > .alignwide {
            max-width: var(--wp--style--global--wide-size);
        }

        body .is-layout-flex {
            display: flex;
        }

        body .is-layout-flex {
            flex-wrap: wrap;
            align-items: center;
        }

        body .is-layout-flex > * {
            margin: 0;
        }

        body .is-layout-grid {
            display: grid;
        }

        body .is-layout-grid > * {
            margin: 0;
        }

        :where(.wp-block-columns.is-layout-flex) {
            gap: 2em;
        }

        :where(.wp-block-columns.is-layout-grid) {
            gap: 2em;
        }

        :where(.wp-block-post-template.is-layout-flex) {
            gap: 1.25em;
        }

        :where(.wp-block-post-template.is-layout-grid) {
            gap: 1.25em;
        }

        .has-black-color {
            color: var(--wp--preset--color--black) !important;
        }

        .has-cyan-bluish-gray-color {
            color: var(--wp--preset--color--cyan-bluish-gray) !important;
        }

        .has-white-color {
            color: var(--wp--preset--color--white) !important;
        }

        .has-pale-pink-color {
            color: var(--wp--preset--color--pale-pink) !important;
        }

        .has-vivid-red-color {
            color: var(--wp--preset--color--vivid-red) !important;
        }

        .has-luminous-vivid-orange-color {
            color: var(--wp--preset--color--luminous-vivid-orange) !important;
        }

        .has-luminous-vivid-amber-color {
            color: var(--wp--preset--color--luminous-vivid-amber) !important;
        }

        .has-light-green-cyan-color {
            color: var(--wp--preset--color--light-green-cyan) !important;
        }

        .has-vivid-green-cyan-color {
            color: var(--wp--preset--color--vivid-green-cyan) !important;
        }

        .has-pale-cyan-blue-color {
            color: var(--wp--preset--color--pale-cyan-blue) !important;
        }

        .has-vivid-cyan-blue-color {
            color: var(--wp--preset--color--vivid-cyan-blue) !important;
        }

        .has-vivid-purple-color {
            color: var(--wp--preset--color--vivid-purple) !important;
        }

        .has-black-background-color {
            background-color: var(--wp--preset--color--black) !important;
        }

        .has-cyan-bluish-gray-background-color {
            background-color: var(--wp--preset--color--cyan-bluish-gray) !important;
        }

        .has-white-background-color {
            background-color: var(--wp--preset--color--white) !important;
        }

        .has-pale-pink-background-color {
            background-color: var(--wp--preset--color--pale-pink) !important;
        }

        .has-vivid-red-background-color {
            background-color: var(--wp--preset--color--vivid-red) !important;
        }

        .has-luminous-vivid-orange-background-color {
            background-color: var(--wp--preset--color--luminous-vivid-orange) !important;
        }

        .has-luminous-vivid-amber-background-color {
            background-color: var(--wp--preset--color--luminous-vivid-amber) !important;
        }

        .has-light-green-cyan-background-color {
            background-color: var(--wp--preset--color--light-green-cyan) !important;
        }

        .has-vivid-green-cyan-background-color {
            background-color: var(--wp--preset--color--vivid-green-cyan) !important;
        }

        .has-pale-cyan-blue-background-color {
            background-color: var(--wp--preset--color--pale-cyan-blue) !important;
        }

        .has-vivid-cyan-blue-background-color {
            background-color: var(--wp--preset--color--vivid-cyan-blue) !important;
        }

        .has-vivid-purple-background-color {
            background-color: var(--wp--preset--color--vivid-purple) !important;
        }

        .has-black-border-color {
            border-color: var(--wp--preset--color--black) !important;
        }

        .has-cyan-bluish-gray-border-color {
            border-color: var(--wp--preset--color--cyan-bluish-gray) !important;
        }

        .has-white-border-color {
            border-color: var(--wp--preset--color--white) !important;
        }

        .has-pale-pink-border-color {
            border-color: var(--wp--preset--color--pale-pink) !important;
        }

        .has-vivid-red-border-color {
            border-color: var(--wp--preset--color--vivid-red) !important;
        }

        .has-luminous-vivid-orange-border-color {
            border-color: var(--wp--preset--color--luminous-vivid-orange) !important;
        }

        .has-luminous-vivid-amber-border-color {
            border-color: var(--wp--preset--color--luminous-vivid-amber) !important;
        }

        .has-light-green-cyan-border-color {
            border-color: var(--wp--preset--color--light-green-cyan) !important;
        }

        .has-vivid-green-cyan-border-color {
            border-color: var(--wp--preset--color--vivid-green-cyan) !important;
        }

        .has-pale-cyan-blue-border-color {
            border-color: var(--wp--preset--color--pale-cyan-blue) !important;
        }

        .has-vivid-cyan-blue-border-color {
            border-color: var(--wp--preset--color--vivid-cyan-blue) !important;
        }

        .has-vivid-purple-border-color {
            border-color: var(--wp--preset--color--vivid-purple) !important;
        }

        .has-vivid-cyan-blue-to-vivid-purple-gradient-background {
            background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;
        }

        .has-light-green-cyan-to-vivid-green-cyan-gradient-background {
            background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;
        }

        .has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background {
            background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;
        }

        .has-luminous-vivid-orange-to-vivid-red-gradient-background {
            background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;
        }

        .has-very-light-gray-to-cyan-bluish-gray-gradient-background {
            background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;
        }

        .has-cool-to-warm-spectrum-gradient-background {
            background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;
        }

        .has-blush-light-purple-gradient-background {
            background: var(--wp--preset--gradient--blush-light-purple) !important;
        }

        .has-blush-bordeaux-gradient-background {
            background: var(--wp--preset--gradient--blush-bordeaux) !important;
        }

        .has-luminous-dusk-gradient-background {
            background: var(--wp--preset--gradient--luminous-dusk) !important;
        }

        .has-pale-ocean-gradient-background {
            background: var(--wp--preset--gradient--pale-ocean) !important;
        }

        .has-electric-grass-gradient-background {
            background: var(--wp--preset--gradient--electric-grass) !important;
        }

        .has-midnight-gradient-background {
            background: var(--wp--preset--gradient--midnight) !important;
        }

        .has-small-font-size {
            font-size: var(--wp--preset--font-size--small) !important;
        }

        .has-medium-font-size {
            font-size: var(--wp--preset--font-size--medium) !important;
        }

        .has-large-font-size {
            font-size: var(--wp--preset--font-size--large) !important;
        }

        .has-x-large-font-size {
            font-size: var(--wp--preset--font-size--x-large) !important;
        }

        .wp-block-navigation a:where(:not(.wp-element-button)) {
            color: inherit;
        }

        :where(.wp-block-post-template.is-layout-flex) {
            gap: 1.25em;
        }

        :where(.wp-block-post-template.is-layout-grid) {
            gap: 1.25em;
        }

        :where(.wp-block-columns.is-layout-flex) {
            gap: 2em;
        }

        :where(.wp-block-columns.is-layout-grid) {
            gap: 2em;
        }

        .wp-block-pullquote {
            font-size: 1.5em;
            line-height: 1.6;
        }
	</style>
	<link rel='stylesheet' id='aos-css' href='https://light.desineo.pl/wp-content/themes/default/assets/css/aos.min.css' type='text/css' media='all'/>
	<link rel='stylesheet' id='theme-css-css' href='https://light.desineo.pl/wp-content/themes/default/assets/css/style.css' type='text/css' media='all'/>
	<link rel='stylesheet' id='font-css' href='https://light.desineo.pl/wp-content/themes/default/assets/css/font.css' type='text/css' media='all'/>
	<link rel='stylesheet' id='tns-css' href='https://light.desineo.pl/wp-content/themes/default/assets/css/tns.min.css' type='text/css' media='all'/>
	<link rel="canonical" href="https://light.desineo.pl/kreator/"/>
	<link rel='shortlink' href='https://light.desineo.pl/?p=31'/>

</head>

<body class="page-template page-template-page-creator page-template-page-creator-php page page-id-31">

<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<div id="app" class="absolute top-0 left-0 w-screen h-screen z-10 bg-white">
	<div class="steps w-full h-full relative p-10">
		<div class="step-0 flex items-center w-full h-full" v-if="step === 0">
			Witam Cię w naszym kreatorze oświetlenia.
			<br/><br/>
			Nasze narzędzie pomoże Ci zaprojektować oświetlenie w pomieszczeniach
			zgodnie z ich przeznaczeniem.
			<br/><br/>
			Nie masz wszystkich danych wejściowych - nie martw się, kreator zaproponuje Ci
			bezpieczną drogę, tak aby spełniła niezbędne wymagania.
			<br/><br/>
			Pamiętaj, w przypadkach kiedy obszar, który chcesz zaprojektować jest
			skąplikowany lub masz jakiekolwiek wątpliwości - skontaktuj się z nami, jesteśmy tu aby Ci pomóc.
			<div class="creator-footer">
				<button type="button" @click="page(1)" class="button">Dalej</button>
			</div>
		</div>
		<div class="w-full h-full items-center justify-center flex flex-col gap-12" v-if="step === 1">
			<div class="grid grid-cols-6 gap-8 items-center">
				<button class="flex flex-col items-center gap-2 group hover:bg-neutral-50 transition-all duration-300 p-4"
						:class="{'bg-lime-500': currentLight === light}"
						v-for="(light, index) in lights"
						@click.prevent="setCurrent(light, index)"
						type="button"
				>
					<img :src="light.image" :alt="light.name" width="64" loading="lazy"/>
					<span class="uppercase font-bold text-lg group-hover:text-lime-500 transition-colors">{{light.name}}</span>
					<span class="flex flex-col font-light text-sm" @mouseover="contentSelected = true"
						  @mouseleave="contentSelected = null">
                            <span class="text-neutral-800 hover:text-neutral-900">natężenie {{light.intensity}}lx</span>
                            <span class="text-neutral-800 hover:text-neutral-900">płaszczyzna robocza {{light.working_plane}}m</span>
                            <span class="text-neutral-800 hover:text-neutral-900">wsp. konserwacji  {{light.maintenance_factor}}</span>
                        </span>
				</button>
			</div>
			<span class="text-xs text-neutral-400">Kreator nie przyjmuje marginesu projektowego przy ścianie.</span>
			<div class="relative w-full">
				<div class="text-lime-500 absolute w-full text-sm text-center flex flex-col" v-if="contentSelected">
					<span>{{content.intensity}}</span>
					<span>{{content.working_plane}}</span>
					<span>{{content.maintenance_factor}}</span>
					<span>{{content.reflectivity}}</span>
				</div>
			</div>
			<div class="creator-footer">
				<button type="button" @click="page(-1)" class="button">Wstecz</button>
				<button type="button" @click="page(1)" :disabled="currentLight === null" class="button">Dalej
				</button>
			</div>
		</div>
		<form @submit.prevent="storeData" class="w-full h-full items-center justify-center flex flex-col gap-12"
			  v-if="step === 2">
			<div class="flex flex-col gap-8">
				<label class="creator-label relative">
					<span>NAZWA TWOJEGO PROJEKTU</span>
					<input type="text" name="name" v-model.lazy="data.name" maxlength="15"
						   @mouseenter="helpProjectName = true" @mouseleave="helpProjectName = false" required/>
					<span class="opacity-0 text-lime-500 absolute -bottom-5 left-0 w-full"
						  :class="{'opacity-100': helpProjectName}"
					>opcjonalnie wpisz nazwę własną (15 znaków)</span>
				</label>
				<div class="grid grid-cols-3 gap-4">
					<label class="creator-label">
						<span>DŁUGOŚĆ</span>
						<input type="number" min="1" max="100" v-model.number="data.length" required/>
					</label>
					<label class="creator-label">
						<span>SZEROKOŚĆ</span>
						<input type="number" min="1" max="100" v-model.number="data.width" required/>
					</label>
					<label class="creator-label">
						<span>WYSOKOŚĆ ZAWIESZENIA OPRAW</span>
						<input type="number" min="1" max="100" v-model.number="data.height" required/>
					</label>
					<div class="flex flex-col gap-1 text-center text-xs font-light text-neutral-500 col-span-3">
						<span>w zakresie 1-100m z dokładnością do 1m</span>
						<span>w kolejnym kroku będziesz mógł edytować szczegółowy rzut pomieszczenia</span>
					</div>
				</div>
				<label class="creator-label">
					<span>ROZMIESZCZENIE OPRAW WZDŁUŻ KRAWĘDZI</span>
					<select name="along" v-model="data.along" required>
						<option disabled value="">Wybierz</option>
						<option value="along_length">Wzdłuż długości</option>
						<option value="along_width">Wzdłuż szerokości</option>
					</select>
				</label>
			</div>
			<div class="creator-footer">
				<button type="button" @click="page(-1)" class="button">Wstecz</button>
				<button type="submit"
						@click.prevent="storeData"
						:disabled="!data.along || !data.height || !data.width || !data.length || !data.name"
						class="button">
					Dalej
				</button>
			</div>
		</form>
		<div class="w-full h-full items-center justify-center flex flex-col gap-12" v-if="step === 3">
			<div class="relative w-full h-full grid place-items-center">
				<div class="h-[70vh] w-fit overflow-auto" id="creator-area-overflow">
					<div class="grid creator-area" id="creator-area"
						 :style="{ transform: `scale(${zoomLevel / 100})` }">
                    <span :class="`creator-area-item creator-area-item-${key}  ${selectedArea.includes(key) ? 'creator-area-item--is-selected' : ''}`"
						  @mousedown="mouseDown(key)"
						  @mouseenter="mouseEnter(key)"
						  @mouseup="mouseUp"
						  :key="key"
						  v-for="key in 10000"></span>
					</div>
					<div class="absolute z-10 right-20 top-1/2 shadow-xl">
						<button @click="zoomIn"
								class="w-10 h-10 bg-black hover:bg-lime-500 text-lg text-white hover:text-black">+
						</button>
						<button @click="zoomOut"
								class="w-10 h-10 bg-black hover:bg-lime-500 text-lg text-white hover:text-black">-
						</button>
					</div>
				</div>
			</div>
			<div class="creator-footer">
				<button type="button" @click="page(-1)" class="button">Wstecz</button>
				<button type="button" @click="page(1)" class="button">Dalej</button>
			</div>
		</div>
		<div class="w-full h-full items-center justify-center flex flex-col" v-if="step === 4">
			<div class="flex flex-col items-center justify-center">
				<h2 class="font-light text-2xl">PODSUMOWANIE</h2>
				<div class="text-sm">Nasz kreator przygotuje dla Ciebie projekt o parametrach:</div>
			</div>
			<div class="container mt-6 relative">
				<div class="grid grid-cols-2 border border-neutral-200">
					<div class="p-8 w-full flex flex-col border-r border-r-neutral-200">
						<b>{{data.name}}</b>
						<span>{{light.name}}</span>
						<span>Natężenie proponowane na obszarze: {{light.intensity}}lx</span>
						<span>Płaszczyzna robocza: {{light.working_plane}}</span>
						<span>Wsp. konserwacji: {{light.maintenance_factor}}</span>
						<span>Margines: 0,0</span>
						<span>Długość: {{data.length}}m</span>
						<span>Szerokość: {{data.width}}m</span>
						<span>Wysokość zawieszenia opraw: {{data.height}}</span>
						<span>Zawieszenie opraw {{data.along === "along_length" ? "wzdłuż długości" : "wzdłuż szerokości"}}</span>
					</div>
					<div class="p-8">
						<div class="grid creator-area !border-0">
                            <span :class="`creator-area-item creator-area-item-xs creator-area-item-${key} ${selectedArea.includes(key) ? 'creator-area-item--is-selected' : ''}`"
								  :key="key"
								  v-for="key in 10000"></span>
						</div>
					</div>
				</div>
			</div>
			<div class="creator-footer">
				<button type="button" @click="page(-1)" class="button">Wstecz</button>
				<button type="button" @click="page(1)" class="button">Dalej</button>
			</div>
		</div>

		<div class="w-full h-full items-center justify-center flex flex-col" v-if="step === 5">

			<div class="flex flex-col items-center justify-center relative">
				<canvas ref="canvas" width="1200" height="1200" style="border: 1px solid #000;"></canvas>
			</div>

			<div class="creator-footer">
				<button type="button" @click="page(-1)" class="button">Wstecz</button>
			</div>

		</div>

	</div>
</div>

<script>

	const {createApp, ref, watch} = Vue

	createApp({
		data() {
			return {
				step: localStorage.getItem("step") ? parseInt(localStorage.getItem("step")) : 0,
				lights: [{
					"image": "https:\/\/light.desineo.pl\/wp-content\/uploads\/2024\/02\/office-chair-svgrepo-com.svg",
					"name": "Biuro",
					"intensity": 500,
					"working_plane": 0.85,
					"maintenance_factor": 0.67,
					"fixtures": false
				}, {
					"image": "https:\/\/light.desineo.pl\/wp-content\/uploads\/2024\/02\/tools-svgrepo-com.svg",
					"name": "Produkcja",
					"intensity": 300,
					"working_plane": 0,
					"maintenance_factor": 0.67,
					"fixtures": [{
						"name": "oprawa hermetyczna LED 40W",
						"intensity": 300,
						"height": 0.8,
						"maintenance": 0.77,
						"uniformity": 0.8,
						"height_suspension": 4,
						"price": 250,
						"length": 5,
						"width": 3.33,
						"Illuminated_area": 2
					}, {
						"name": "oprawa hermetyczna LED 50W",
						"intensity": 300,
						"height": 0.8,
						"maintenance": 0.77,
						"uniformity": 0.8,
						"height_suspension": 6,
						"price": 300,
						"length": 6,
						"width": 4.33,
						"Illuminated_area": 3
					}]
				}, {
					"image": "https:\/\/light.desineo.pl\/wp-content\/uploads\/2024\/02\/cabinets-storage-svgrepo-com.svg",
					"name": "Magazyn",
					"intensity": 150,
					"working_plane": 0,
					"maintenance_factor": 0.67,
					"fixtures": false
				}, {
					"image": "https:\/\/light.desineo.pl\/wp-content\/uploads\/2024\/02\/trees-fruit-tree-svgrepo-com.svg",
					"name": "Teren zewn\u0119trzny",
					"intensity": 50,
					"working_plane": 0,
					"maintenance_factor": 0.77,
					"fixtures": false
				}, {
					"image": "https:\/\/light.desineo.pl\/wp-content\/uploads\/2024\/02\/horse-solid-svgrepo-com.svg",
					"name": "Hala je\u017adziecka",
					"intensity": 300,
					"working_plane": 0,
					"maintenance_factor": 0.77,
					"fixtures": false
				}, {
					"image": "https:\/\/light.desineo.pl\/wp-content\/uploads\/2024\/02\/stable-svgrepo-com.svg",
					"name": "Obora \/ Stajnia",
					"intensity": 150,
					"working_plane": 0,
					"maintenance_factor": 0.67,
					"fixtures": false
				}],
				content: {
					"intensity": "Nat\u0119\u017cenie o\u015bwietlenia - informacja o g\u0119sto\u015bci strumienia \u015bwiat\u0142a padaj\u0105cego na dan\u0105 powierzchni\u0119, zgodnie z wymogami normy PN-EN 12464-1:2012P oraz Obwieszczeniem Dz.U. 2022 poz. 1225",
					"working_plane": "P\u0142aszczyzna robocza - wysoko\u015b\u0107 na jakiej odbywa si\u0119 praca",
					"maintenance_factor": "Wsp. konserwacji - uzale\u017cniony od warunk\u00f3w jakie panuj\u0105 na obiekcie, np. zabrudzenie opraw oraz \u015bcian sufit\u00f3w i pod\u0142ogi oraz spadek sprawno\u015bci diody LED po okre\u015blonym czasie",
					"reflectivity": "Wsp\u00f3\u0142czynnik odbicia - informacja na temat zabrudzenia i koloru sufitu, \u015bcian i pod\u0142ogi - przyjmujemy standardowe warto\u015bci 70 \/ 50 \/ 20"
				},
				helpProjectName: false,
				contentSelected: null,
				currentLight: null,
				light: JSON.parse(localStorage.getItem("light")),
				fixture: null,
				data: {
					name: null,
					length: null,
					width: null,
					height: null,
					along: null
				},
				selectedArea: localStorage.getItem("selectedArea") ? JSON.parse(localStorage.getItem("selectedArea")) : [],
				isDragging: false,
				zoomLevel: 100
			}
		},
		mounted() {

			this.init();

		},
		methods: {
			init() {

				if (!this.selectedArea || this.selectedArea.length === 0) {
					this.calculateSelectedArea();
				}

				if (localStorage.getItem('currentLight')) {
					this.currentLight = this.lights[parseInt(localStorage.getItem('currentLight'))];
				}

				let userData = JSON.parse(localStorage.getItem('userData'));

				if (userData) {
					this.data = {...userData};
				} else {

					if (userData && userData.name) {
						this.data.name = userData.name;
					} else if (this.currentLight) {
						this.data.name = this.currentLight.name + "/" + 20240214 + "/" + 44;
					}

				}

				if (this.step === 3) {
					this.centerAndZoomArea();
				}

				if (this.step === 4) {

					let calculate = this.calculateDimensions();

					this.data.width = calculate.width;
					this.data.length = calculate.length;

				}

				if (this.step === 5) {

					this.$nextTick(() => {
						this.drawCanvas();
					});
				}

			},
			drawCanvas() {
				const canvas = this.$refs.canvas;
				if (!canvas) return;

				const ctx = canvas.getContext('2d');
				const squareSize = 12; // Rozmiar kwadratu (1x1m)
				const fixtureWidth = 2; // Pomniejszona szerokość oprawy
				const fixtureHeight = 6; // Pomniejszona wysokość oprawy

				ctx.clearRect(0, 0, canvas.width, canvas.height);

				// Rysowanie zaznaczonego obszaru
				ctx.fillStyle = 'silver';
				this.selectedArea.forEach(index => {
					const x = (index % 100) * squareSize;
					const y = Math.floor(index / 100) * squareSize;
					ctx.fillRect(x, y, squareSize, squareSize);
				});

				// Równomierne rozmieszczanie opraw
				ctx.fillStyle = 'red';
				const numberOfFixtures = Math.ceil(this.selectedArea.length / this.fixture.Illuminated_area);
				const fixturesPerRow = Math.ceil(Math.sqrt(numberOfFixtures));

				const selectedAreaWidth = Math.max(...this.selectedArea.map(index => index % 100)) - Math.min(...this.selectedArea.map(index => index % 100)) + 1;
				const selectedAreaHeight = Math.max(...this.selectedArea.map(index => Math.floor(index / 100))) - Math.min(...this.selectedArea.map(index => Math.floor(
					index / 100))) + 1;

				const spacingX = (selectedAreaWidth * squareSize) / fixturesPerRow;
				const spacingY = (selectedAreaHeight * squareSize) / fixturesPerRow;

				for (let i = 0; i < fixturesPerRow; i++) {
					for (let j = 0; j < fixturesPerRow; j++) {
						const x = (i * spacingX + spacingX / 2) - fixtureWidth / 2 + Math.min(...this.selectedArea.map(index => index % 100)) * squareSize;
						const y = (j * spacingY + spacingY / 2) - fixtureHeight / 2 + Math.min(...this.selectedArea.map(index => Math.floor(index / 100))) * squareSize;
						if (this.isInsideSelectedArea(x / squareSize, y / squareSize)) {
							ctx.fillRect(x, y, fixtureWidth, fixtureHeight);
						}
					}
				}
			},

			// Sprawdzenie, czy punkt znajduje się w obrębie selectedArea
			isInsideSelectedArea(x, y) {
				const index = Math.floor(y) * 100 + Math.floor(x);
				return this.selectedArea.includes(index);
			},
			centerAndZoomArea() {

				setTimeout(() => {
					let overflowContainer = document.querySelector('#creator-area-overflow');
					overflowContainer.scrollTo(0, (overflowContainer.offsetHeight / 3));
					this.zoomLevel += 30;
				}, 250);

			},
			zoomIn() {
				if (this.zoomLevel < 200) {
					this.zoomLevel += 10;
				}
			},
			zoomOut() {
				if (this.zoomLevel > 100) {
					this.zoomLevel -= 10;
				}
			},
			setCurrent(light, index) {

				this.currentLight = light;
				this.data = {};

				this.data.name = this.currentLight.name + "/" + 20240214 + "/" + 27;

				localStorage.setItem("currentLight", index);
				localStorage.setItem("light", JSON.stringify(light));
				localStorage.removeItem("userData");

			},
			storeData() {

				this.selectedArea = [];

				const selectedFixture = this.currentLight.fixtures.find(fixture => fixture.height_suspension >= this.data.height);

				if (selectedFixture) {
					this.fixture = selectedFixture;
				}

				localStorage.removeItem("selectedArea");
				localStorage.setItem("userData", JSON.stringify(this.data));

				this.page(1);

			},
			page(step) {

				this.step = this.step + step;

				if (this.step === 3) {
					this.centerAndZoomArea();
				}

				localStorage.setItem("step", this.step);

				this.init();

			},
			calculateDimensions() {
				if (this.selectedArea.length === 0) {
					return {length: 0, width: 0};
				}

				let minX = Infinity, maxX = -Infinity, minY = Infinity, maxY = -Infinity;

				this.selectedArea.forEach(index => {
					const x = index % 100; // kolumna
					const y = Math.floor(index / 100); // wiersz

					minX = Math.min(minX, x);
					maxX = Math.max(maxX, x);
					minY = Math.min(minY, y);
					maxY = Math.max(maxY, y);
				});

				// Plus jeden, aby uwzględnić końcowe kwadraty w obu wymiarach
				const width = (maxX - minX) + 1;
				const length = (maxY - minY) + 1;

				return {width, length};
			},
			calculateSelectedArea() {

				const centerRow = Math.ceil((100 - this.data.length) / 2);
				const centerCol = Math.ceil((100 - this.data.width) / 2);

				for (let i = 0; i < this.data.length; i++) {
					for (let j = 0; j < this.data.width; j++) {
						const index = (centerRow + i) * 100 + centerCol + j;
						this.selectedArea.push(index);
					}
				}

			}
			,
			isAdjacentToSelected(index) {
				const adjacentIndices = [
					index - 100,
					index + 100,
					index - 1,
					index + 1,
				].filter(adjIndex => {
					const adjRow = Math.floor(adjIndex / 100);
					const adjCol = adjIndex % 100;
					return adjRow >= 0 && adjRow < 100 && adjCol >= 0 && adjCol < 100;
				});

				return adjacentIndices.some(adjIndex => this.selectedArea.includes(adjIndex));
			}
			,
			canRemoveIndex(indexToRemove) {

				const newSelectedArea = this.selectedArea.filter(index => index !== indexToRemove);

				if (newSelectedArea.length === 0) {
					return true;
				}

				const start = newSelectedArea[0];
				const visited = new Set();
				const stack = [start];

				while (stack.length > 0) {
					const current = stack.pop();
					visited.add(current);

					const neighbors = this.getNeighbors(current);
					neighbors.forEach(neighbor => {
						if (newSelectedArea.includes(neighbor) && !visited.has(neighbor)) {
							stack.push(neighbor);
						}
					});
				}

				return newSelectedArea.every(index => visited.has(index));
			}
			,

			toggleSelect(index) {
				const isSelected = this.selectedArea.includes(index);

				if (isSelected) {
					// Tworzymy tymczasową kopię selectedArea bez elementu, który chcemy usunąć
					const tempSelectedArea = this.selectedArea.filter(item => item !== index);

					// Sprawdzamy, czy po usunięciu pozostanie spójna grupa
					if (this.isGroupConsistent(tempSelectedArea) && this.canRemoveIndex(index)) {
						this.selectedArea = tempSelectedArea;
					}
				} else {
					// Sprawdzamy, czy dodanie elementu jest dozwolone (czy ma sąsiada w pionie lub poziomie)
					const isAdjacent = this.isAdjacentToSelected(index, true); // true oznacza, że sprawdzamy sąsiedztwo bez skosów
					if (isAdjacent) {
						this.selectedArea.push(index);
					}
				}

				localStorage.setItem("selectedArea", JSON.stringify([...this.selectedArea]));
			}
			,
			isGroupConsistent(selectedArea) {
				if (selectedArea.length === 0) return false; // Brak elementów, grupa jest niekonsystentna

				const visited = new Set();
				const queue = [selectedArea[0]]; // Startujemy od pierwszego zaznaczonego elementu

				while (queue.length > 0) {
					const current = queue.shift(); // Pobieramy i usuwamy element z początku kolejki
					if (!visited.has(current)) {
						visited.add(current); // Dodajemy element do zbioru odwiedzonych

						// Pobieramy sąsiadów bieżącego elementu, którzy są zaznaczeni i nie byli odwiedzeni
						const neighbors = this.getNeighbors(current).filter(n => selectedArea.includes(n) && !visited.has(n));

						// Dodajemy sąsiadów do kolejki
						queue.push(...neighbors);
					}
				}

				// Sprawdzamy, czy odwiedziliśmy wszystkie zaznaczone elementy
				return visited.size === selectedArea.length;
			}
			,

			getNeighbors(index) {
				const row = Math.floor(index / 100);
				const col = index % 100;
				const neighbors = [];

				// Definiujemy kierunki przesunięć: góra, dół, lewo, prawo
				const directions = [[-1, 0], [1, 0], [0, -1], [0, 1]];

				directions.forEach(([dr, dc]) => {
					const r = row + dr, c = col + dc;
					if (r >= 0 && r < 100 && c >= 0 && c < 100) {
						neighbors.push(r * 100 + c);
					}
				});

				return neighbors;
			}
			,
			mouseDown(index) {
				this.isDragging = true;
				this.toggleSelect(index);
			}
			,
			mouseEnter(index) {
				if (this.isDragging) {
					this.toggleSelect(index);
				}
			}
			,
			mouseUp() {
				this.isDragging = false;
			}
			,
		},
		watch: {}
	}).mount('#app')

</script>

<script type="text/javascript" defer src="https://light.desineo.pl/wp-content/themes/default/assets/js/tns.min.js" id="tns-js"></script>
<script type="text/javascript" defer src="https://light.desineo.pl/wp-content/themes/default/assets/js/aos.min.js" id="aos-js"></script>
<script type="text/javascript" defer src="https://light.desineo.pl/wp-content/themes/default/assets/js/theme.js" id="theme-js-js"></script>

<div class=" text-white cookie fixed z-50 left-2 lg:left-8 bottom-32 lg:bottom-8 bg-neutral-900 w-3/4 lg:w-96 text-xs">
	<div class="relative p-6">
		<button type="button" aria-label="Zaakceptuj cookie"
				class="cookie_close absolute top-1 right-2 text-xl text-neutral-300">x
		</button>
		Używamy plików cookies na naszej stronie internetowej. Kontynuując korzystanie z naszej strony internetowej,
		wyrażasz zgodę na przetwarzanie Twoich danych osobowych.
	</div>
</div>

</body>
</html>
